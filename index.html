<!DOCTYPE html>
<html lang="en">
	
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> Humber River Data Visualization </title>

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Playwrite+DE+Grund:wght@100..400&display=swap" rel="stylesheet">

        <!-- Stylesheet -->
        <link rel="stylesheet" href="style.css">
        
    </head>

    <body class="background_1">

        <div class="outer">
            <div class="div_2">
                <!-- Sliders (Inverted container, so top slider starts at the bottom.) -->

                    <!-- WORMS -->
                    <div class="slider_container">
                        <h4 class="slider_name"> Worms: <var class="slider_value_display" id="worms_value">0</var> % </h4>
                        <input type="range" min="0" max="100" value="0" class="slider" id="slider_worms">
                    </div>

                    <!-- MIDGES -->
                    <div class="slider_container">
                        <h4 class="slider_name"> Midges: <var class="slider_value_display" id="midges_value">0</var> % </h4>
                        <input type="range" min="0" max="100" value="0" class="slider" id="slider_midges">
                    </div>
                    
                    <!-- SOWBUGS -->
                    <div class="slider_container">
                        <h4 class="slider_name"> Sowbugs: <var class="slider_value_display" id="sowbugs_value">0</var> % </h4>
                        <input type="range" min="0" max="100" value="40" class="slider" id="slider_sowbugs">
                    </div>
                    
                    <!-- SNAILS -->
                    <div class="slider_container">
                        <h4 class="slider_name"> Snails </h4>
                        <input type="range" min="0" max="500" value="0" class="slider" id="slider_snails">
                    </div>

                    <!-- SPECIES -->
                    <div class="slider_container">
                        <h4 class="slider_name"> Species</h4>
                        <input type="range" min="0" max="28" value="0" class="slider" id="slider_species">
                    </div>
                    
                    <!-- DOMINANT SPECIES -->
                    <div class="slider_container">
                        <h4 class="slider_name"> Dominant Species </h4>
                        <input type="range" min="0" max="100" value="0" class="slider" id="slider_d_species">
                    </div>
                    
                    <!-- EPT INDEX -->
                    <div class="slider_container">
                        <h4 class="slider_name"> EPT Index </h4>
                        <input type="range" min="0" max="100" value="0" class="slider" id="slider_ept">
                    </div>

                    <!-- FLIES -->
                    <div class="slider_container">
                        <h4 class="slider_name"> Flies </h4>
                        <input type="range" min="0" max="100" value="0" class="slider" id="slider_flies">
                    </div>

                    <!-- INSECTS -->
                    <div class="slider_container">
                        <h4 class="slider_name"> Insects </h4>
                        <input type="range" min="0" max="100" value="0" class="slider" id="slider_insects">
                    </div>

                    <!-- HBI INDEX -->
                    <div class="slider_container">
                        <h4 class="slider_name"> HBI Index </h4>
                        <input type="range" min="1" max="8" value="0" class="slider" id="slider_hbi">
                    </div>
            </div>
        </div>
    </body>



    
<script>
    /* Slider color changer for sliders with percentages */
    class SliderColorController {
        constructor(sliderId, max_1, min_2, max_2, min_3) {
            this.slider = document.getElementById(sliderId);
            this.maxValue = this.slider.max;

            this.max_1 = max_1;
            this.min_2 = min_2;
            this.max_2 = max_2;
            this.min_3 = min_3;
            
            this.slider.addEventListener('input', () => {
                this.updateSliderColor();
            });
        }

        // Method to update slider color based on its value
        updateSliderColor() {
            const currentValue = this.slider.value;

            // Add or remove the 'slider-green' class based on the value
            if (currentValue <= this.maxValue * this.max_1) {
                this.slider.classList.add('slider-green');
            } else {
                this.slider.classList.remove('slider-green');
            }

            // Add or remove the 'slider-yellow' class based on the value
            if (currentValue >= this.maxValue * this.min_2 && currentValue <= this.maxValue * this.max_2) {
                this.slider.classList.add('slider-yellow');
            } else {
                this.slider.classList.remove('slider-yellow');
            }

            // Add or remove the 'slider-red' class based on the value
            if (currentValue >= this.maxValue * this.min_3) {
                this.slider.classList.add('slider-red');
            } else {
                this.slider.classList.remove('slider-red');
            }
        }
    }

    /* Value display */
    class ValueDisplay {
        constructor(sliderId, varId) {
            // Select the slider and <var> elements by their IDs
            this.slider = document.getElementById(sliderId);
            this.varElement = document.querySelector(`#${varId}`);

            this.slider.addEventListener('input', () => {
                this.updateContent();
            });
        }

        updateContent() {
            if (this.varElement) {
                const currentValue = this.slider.value;
                const maxValue = this.slider.max;
                const valPercentage = currentValue / maxValue * 100;
                const valRound = Math.round(valPercentage);
                this.varElement.textContent = valRound;

            } else {
                console.error('Var element not found');
            }
        }

    }
    

 /*
    document.getElementById('slider_worms').addEventListener('input', function () {
        const slider = this;
        const maxValue = slider.max;
        const currentValue = slider.value;

        if (currentValue <= maxValue * 0.10) {
            slider.classList.add('slider-green');
        } else {
            slider.classList.remove('slider-green');
        }

        if ((currentValue >= maxValue * 0.11) && (currentValue <= maxValue * 0.30)) {
            slider.classList.add('slider-yellow');
        } else {
            slider.classList.remove('slider-yellow');
        }
 
        if (currentValue >= maxValue * 0.31) {
            slider.classList.add('slider-red');
        } else {
            slider.classList.remove('slider-red');
        }
        
    });
*/

    /* WORMS */
    // Color
    new SliderColorController('slider_worms', 0.10, 0.11, 0.30, 0.31);

    // Value
    new ValueDisplay('slider_worms', 'worms_value');

    /* MIDGES slider color */
    new SliderColorController('slider_midges', 0.10, 0.11, 0.40, 0.41);

    // Value
    new ValueDisplay('slider_midges', 'midges_value');

    /* SOWBUGS slider color */
    new SliderColorController('slider_sowbugs', 0.00, 0.01, 0.05, 0.06);

    // Value
    new ValueDisplay('slider_sowbugs', 'worms_sowbugs');

    /* SNAILS slider color */
    new SliderColorController('slider_snails', 0.00, 0.01, 0.10, 0.11);

    // Value
    new ValueDisplay('slider_snails', 'snails_value');

    /* SPECIES slider color (INVERSE) */
    document.getElementById('slider_species').addEventListener('input', function () {
        const slider = this;
        const currentValue = slider.value;

        if (currentValue <= 10) {
            slider.classList.add('slider-red');
        } else {
            slider.classList.remove('slider-red');
        }

        if (currentValue == 11) {
            slider.classList.add('slider-yellow');
        } else {
            slider.classList.remove('slider-yellow');
        }
 
        if (currentValue >= 12) {
            slider.classList.add('slider-green');
        } else {
            slider.classList.remove('slider-green');
        }
        
    });

    // Value
    new ValueDisplay('slider_species', 'species_value');

    /* DOMINANT SPECIES slider color */
    new SliderColorController('slider_d_species', 0.40, 0.41, 0.45, 0.46);

    // Value
    new ValueDisplay('slider_d_species', 'd_species_value');

    /* EPT INDEX SPECIES slider color */
    document.getElementById('slider_ept').addEventListener('input', function () {
        const slider = this;
        const maxValue = slider.max;
        const currentValue = slider.value;

        if (currentValue <= maxValue * 0.05) {
            slider.classList.add('slider-red');
        } else {
            slider.classList.remove('slider-red');
        }

        if ((currentValue >= maxValue * 0.06) && (currentValue <= maxValue * 0.10)) {
            slider.classList.add('slider-yellow');
        } else {
            slider.classList.remove('slider-yellow');
        }
 
        if (currentValue >= maxValue * 0.11) {
            slider.classList.add('slider-green');
        } else {
            slider.classList.remove('slider-green');
        }
        
    });

    // Value
    new ValueDisplay('slider_ept', 'ept_value');

    /* FLIES (NON-LINEAR) */
    document.getElementById('slider_flies').addEventListener('input', function () {
        const slider = this;
        const maxValue = slider.max;
        const currentValue = slider.value;

        /* Red */
        if (currentValue <= maxValue * 0.15) {
            slider.classList.remove('slider-green');
            slider.classList.remove('slider-yellow');
            slider.classList.add('slider-red');
        } 
        
        /* Yellow */
        else if ((currentValue >= maxValue * 0.16) && (currentValue <= maxValue * 0.20)) {
            slider.classList.remove('slider-green');
            slider.classList.add('slider-yellow');
            slider.classList.remove('slider-red');
        }

        /* Green */
        else if ((currentValue >= maxValue * 0.21) && (currentValue <= maxValue * 0.45)) {
            slider.classList.add('slider-green');
            slider.classList.remove('slider-yellow');
            slider.classList.remove('slider-red');
        }
        
        /* Yellow */
        else if ((currentValue >= maxValue * 0.46) && (currentValue <= maxValue * 0.50)) {
            slider.classList.remove('slider-green');
            slider.classList.add('slider-yellow');
            slider.classList.remove('slider-red');
        }

        /* Red */
        else if (currentValue >= maxValue * 0.51) {
            slider.classList.remove('slider-green');
            slider.classList.remove('slider-yellow');
            slider.classList.add('slider-red');
        }
        
        else {
            slider.classList.remove('slider-green');
            slider.classList.remove('slider-yellow');
            slider.classList.remove('slider-red');
        }

    });

    // Value
    new ValueDisplay('slider_flies', 'flies_value');

    /* INSECTS */
    document.getElementById('slider_insects').addEventListener('input', function () {
        const slider = this;
        const maxValue = slider.max;
        const currentValue = slider.value;

        /* Red */
        if (currentValue <= maxValue * 0.40) {
            slider.classList.remove('slider-green');
            slider.classList.remove('slider-yellow');
            slider.classList.add('slider-red');
        } 
        
        /* Yellow */
        else if ((currentValue >= maxValue * 0.41) && (currentValue <= maxValue * 0.50)) {
            slider.classList.remove('slider-green');
            slider.classList.add('slider-yellow');
            slider.classList.remove('slider-red');
        }

        /* Red */
        else if ((currentValue >= maxValue * 0.51) && (currentValue <= maxValue * 0.80)) {
            slider.classList.remove('slider-green');
            slider.classList.remove('slider-yellow');
            slider.classList.add('slider-red');
        }
        
        /* Yellow */
        else if ((currentValue >= maxValue * 0.81) && (currentValue <= maxValue * 0.90)) {
            slider.classList.remove('slider-green');
            slider.classList.add('slider-yellow');
            slider.classList.remove('slider-red');
        }

        /* Red */
        else if (currentValue >= maxValue * 0.91) {
            slider.classList.remove('slider-green');
            slider.classList.remove('slider-yellow');
            slider.classList.add('slider-red');
        }
        
        else {
            slider.classList.remove('slider-green');
            slider.classList.remove('slider-yellow');
            slider.classList.remove('slider-red');
        }

    });

    // Value
    new ValueDisplay('slider_insects', 'insects_value');

    /* HBI INDEX (NUMBERED) */
    document.getElementById('slider_hbi').addEventListener('input', function () {
        const slider = this;
        const currentValue = slider.value;

        if (currentValue <= 5) {
            slider.classList.add('slider-green');
        } else {
            slider.classList.remove('slider-green');
        }

        if (currentValue >= 6 && currentValue <= 7) {
            slider.classList.add('slider-yellow');
        } else {
            slider.classList.remove('slider-yellow');
        }
 
        if (currentValue == 8) {
            slider.classList.add('slider-red');
        } else {
            slider.classList.remove('slider-red');
        }
        
    });

    // Value
    new ValueDisplay('slider_hbi', 'hbi_value');


    /* TER Rating */




</script>
</html>